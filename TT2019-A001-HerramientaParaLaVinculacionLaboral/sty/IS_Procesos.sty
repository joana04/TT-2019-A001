
%%%%%%%%%%%%% REGLAS DE NEGOCIO %%%%%%%%%%%%%
\newenvironment{BussinesRule}[2]%linea original
{%
	\hypertarget{#1}{}%Linea original
	\noindent{\large{\bf Regla de Negocio:} #1 #2}%line Original
	\begin{description}\addtolength{\itemsep}{-0.5\baselineskip}%
}
{%
	\end{description}
}

\newcommand{\BRitem}[1][]{\item[#1]}

%\newcommand{\IUbutton}[1]{\framebox[1.1\width][c]{#1}}
\newcommand{\IUbutton}[1]{\keystroke{#1}}

\newenvironment{Citemize}%
{%
	\begin{itemize}\addtolength{\itemsep}{-0.5\baselineskip}%
%	\setlength{\parskip}{0pt}%
}{%
	\end{itemize}%
}%



%%%%%%%%%%%%% ACTORES %%%%%%%%%%%%%

\newenvironment{Actor}[3][actorRule]{
	{#2}
	\vspace{-20pt}\noindent{\includegraphics[width=\textwidth]{images_Gen/uc/#1}}
	{#3}
	\begin{description}}
	{\end{description}}

	
	
%%%%%%%%%%%%% DOCUMENTO %%%%%%%%%%%%%

\newenvironment{Documento}[2][docRule]{
	{#2}
	\vspace{-20pt}\noindent{\includegraphics[width=\textwidth]{images_Gen/uc/#1}}
	}


%%%%%%%%%%%%% REFERENCIAS %%%%%%%%%%%%%

% Referencia a un Actor ========================================================
% Deprected: Utilizar cdtRef para hacer referencia y cdtLabel para la etiqueta
\newcommand{\refActor}[1]{
    \hypersetup{linkcolor=SecccionColor}%
	\hyperlink{actor:#1}{#1}}

% Producir un texto que referencía aigun elemento del documento ================
% Comando: \cdtRef{id}{Nombre}
\newcommand{\cdtRef}[2]{
    \hypersetup{linkcolor=SecccionColor}%
	\hyperlink{#1}{{#2}}
}

% Producir un texto que referencía aigun elemento del documento ================
% Comando: \cdtRefImg{label}{caption}
\newcommand{\cdtRefImg}[2]{
  \hyperlink{#1}{\ref{#1}: {#1} {#2}}}

% Producir un texto que referencía aigun elemento del documento ================
% Comando: \cdtRefImg{label}{caption}
\newcommand{\cdtRefTask}[2]{
  \hyperlink{#1}{\ref{#1} {#2}}}

% Producir una etiqueta en el documento =========================================
% Comando: \cdtLabel{id}{Texto}
% Para generar una etiqueta vacía utilice \cdtLabel{id}{\cdtEmpty}
\newcommand{\cdtLabel}[2]{\hypertarget{#1}{#2}}

% Producir una etiqueta en el documento. =======================================
% Comando: \cdtLabel{id}{Texto}
% Para generar una etiqueta vacía utilice \cdtLabel{id}{\cdtEmpty}
\newcommand{\cdtLabelTask}[2]{
    \label{#1} \hypertarget{#1}{#2}}

%  Insertar un Diagrama de Proceso =============================================
% use: \Pfig[width]{imagefile}{id}{Nombre del proceso}
\newcommand{\Pfig}[4][0.7]{%
	\begin{figure}[htpb!]%
		\begin{center}%
			\hypertarget{#3}{\includegraphics[width=#1\textwidth]{#2}}%
			\caption{#3 #4}%
			\label{#3}%
		\end{center}%
	\end{figure}%
}

% Funciona igual que cdtRef ====================================================
% Comando: \cdtIdRef{id}{Nombre}
% Propósito: Solo que en la salida aparece también el ID referenciado, ideal para Casos de uso, reglas de negocio, mensajes e Interfaces.
\newcommand{\cdtIdRef}[2]{%
	\hyperlink{#1}{{#1}\ {#2}}%
}






%%%%%%%%%%%%%%%%% CU %%%%%%%%%%%%%%%%

% Agregar un elemento a la descripción del CU
% use \UCitem{item}{descripción}
% use \UCccitem{item}{descripción} para Gestión.
\newcommand{\UCitem}[2]{{\bf {#1:}} & {#2} \\ \hline}%


\newcommand{\UCccitem}[2]{{\bf {\color{colorGris}#1:}} & {\color{colorGris}#2} \\ \hline}%

%------------------------------------------------------------------------
% Agregar una lista de datos en la tabla de descripción de Casos de Uso
% use:
% \begin{UClist}
% 		\UCli Bla bla bla
% 		\UCli[o] Bla bla bla
% \end{UClist}	
\newenvironment{UClist}{\vspace{-1em}}{\vspace{0em}}

%------------------------------------------------------------------------
% use \UCli Bla bla bla
\newcommand{\UCli}[1][\textbullet]{%
	\par{ \color{PrincipalColor}{#1} }%
}

% Descripción
\newenvironment{PDescripcion}
{%

	\renewcommand{\labelenumi}{\textcolor{black}{\bf \theenumi}}%
	\begin{enumerate}\addtolength{\itemsep}{-0.5\baselineskip}%
}%
{%
	\item[- -] - - {\em Fin del proceso}. \end{enumerate}%
	\renewcommand{\labelenumi}{\theenumi}%
}

\newcommand{\Ppaso}[1][]{\item{#1}}


%%%%%%%%%%%%% PROCESOS %%%%%%%%%%%%%
\newenvironment{Proceso}[5][iProceso]{
    \newpage
    \ThisCenterWallPaper{0.81}{images_Gen/proc/#1}
    \addtocounter{counterUC}{1}
    \section{#2 #3}
        \label{#5}
    
    \subsection{Resumen}%
    
    #4
    
    \subsection{Elementos del proceso}%
        \arrayrulecolor{gray}%
        \par\begin{longtable}{| p{.25\textwidth} | p{.75\textwidth} |}%
	    \arrayrulecolor{gray}%
	    \rowcolor{gray}%
	    \UCitem{\color{white}Elemento}{\color{white}#2 #3}%
	\endhead%
	\arrayrulecolor{gray}%
}
{\end{longtable}%

\subsection{Descripción de Tareas}}
\newcounter{counterUC}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando para describir un Use Cases
% usar:
% \begin{UseCase}[fileImagenUC]{idUC}{nomUC}{descripcion completa}
%   \UCitem{Actor} {Vendedor}
%   ...
% \end{UseCase}
\newenvironment{UseCase}[4][default]
{\newpage%
\section{#2 #3}%
\noindent\hypertarget{#2}{\includegraphics[width=1.1\textwidth]{images_Gen/uc/#1}}%
\subsection{Descripción completa}%
#4%

\subsection{Atributos importantes}%
\par\begin{longtable}{| p{.17\textwidth} | p{.75\textwidth} |}%
	\arrayrulecolor{white}
	\rowcolor{gray}
	\UCitem{\color{white}Caso de Uso}{\color{white}#2 #3}%
	\endhead%
	\arrayrulecolor{black}%
%	\UCitem{Nombre}{#3}%
}
{
\end{longtable}%
\subsection{Trayectorias del Caso de Uso}


}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando para describir un BD
\newenvironment{BD}[4][default]
{\newpage%
\section{#2 #3}%
\noindent\hypertarget{#2}{\includegraphics[width=1.1\textwidth]{images_Gen/uc/#1}}%
\subsection{Descripción completa}%
#4%
\subsection{Atributos importantes}%
\par\begin{longtable}{| m{.04\textwidth} | m{.15\textwidth} | m{.25\textwidth} | m{.025\textwidth} | m{.03\textwidth} | m{.03\textwidth} | m{.25\textwidth} |}%
	\arrayrulecolor{white} 
	\rowcolor{gray}
	\BDitem{\color{white} \setlength\tabcolsep{1.5pt} \begin{tabular}{c c} \rotatebox{90}{Llave} & \rotatebox{90}{primaria}\end{tabular} }
	       {\color{white}Columna}
	       {\color{white}Descripción}
	       {\color{white} \rotatebox{90}{Obligatorio}}
	       {\color{white} \setlength\tabcolsep{1.5pt} \begin{tabular}{c c} \rotatebox{90}{Generado} & \rotatebox{90}{por sistema}\end{tabular} }
	       {\color{white} \setlength\tabcolsep{1.5pt} \begin{tabular}{c c} \rotatebox{90}{Ingresado} & \rotatebox{90}{por usuario}\end{tabular} }
	       {\color{white}Valores válidos}%
	\endhead%
	\arrayrulecolor{black}%
}
{
\end{longtable}%
}

% Agregar un elemento a la descripción del BD
\newcommand{\BDitem}[7]{{#1} & {#2} & {#3} & {#4} & {#5} & {#6} & {#7} \\ \hline}%



%---------------------------------------------------------------------
% Definición de iconos:
\newcommand\UCactor{\raisebox{-1mm}{\includegraphics[height=11pt]{images_Gen/uc/actor}}}
\newcommand\UCsist{\raisebox{-1mm}{\includegraphics[height=11pt]{images_Gen/uc/usecase}}}
%\newcommand \PSubProceso{\raisebox{-1mm}{\includegraphics[height=11pt]{images/procesos/isubproceso}}}
\newcommand \itarea{\raisebox{-1mm}{\includegraphics[height=11pt]{images_Gen/proc/itarea}}}
%\newcommand \iMessageEvent{\raisebox{-1mm}{\includegraphics[height=11pt]{images/procesos/iMessageEvent}}}
%\newcommand \iMultipleEvent{\raisebox{-1mm}{\includegraphics[height=11pt]{images/procesos/iMultipleEvent}}}
%\newcommand \iConditionalEvent{\raisebox{-1mm}{\includegraphics[height=11pt]{images/procesos/iConditionalEvent}}}

\newenvironment{UCExtenssionPoint}[4]{%
\bigskip\noindent {\large {\bf Punto de extensión: {#1}}}\\%
\begin{description}\addtolength{\itemsep}{-0.5\baselineskip}%
	\item[Causa de la extensión:] #2%
	\item[Región de la trayetoria:] #3%
	\item[La operación se puede extender a:] #4%
\end{description}%
}%

\newenvironment{UCtrayectoria}[1]
{%
	\bigskip\noindent {\large {\bf Trayectoria principal:}  #1\\}%
	\renewcommand{\labelenumi}{\textcolor{black}{\bf \theenumi}}%
	\begin{enumerate}\addtolength{\itemsep}{-0.5\baselineskip}%
}
{%
	\item[- -] - - {\em Fin del caso de uso}. \end{enumerate}%
	\renewcommand{\labelenumi}{\theenumi}%
}

\newenvironment{UCtrayectoriaA}[3]
{%
\hypertarget{#1}{}%Linea original
	\bigskip\noindent {\large {\bf Trayectoria alternativa {#1}:}}\\%
	{\small{\bf Condición:} {#2}}%
	\renewcommand{\labelenumi}{\textcolor{black}{\bf {#3}\theenumi}}%
	\begin{enumerate}\addtolength{\itemsep}{-0.5\baselineskip}%
}
{%
	\end{enumerate}%
	\renewcommand{\labelenumi}{\theenumi}%
}

\newenvironment{UCescenario}[3]
{%
	\bigskip {\large {\bf Escenario:} #1 #3\\}%
	{\bf Use Case:} #2\\%
	\renewcommand{\labelenumi}{\textcolor{black}{\bf #1\theenumi}}%
	\begin{enumerate}\addtolength{\itemsep}{-0.5\baselineskip}%
}
{%
	\item[- -] - - {\em Fin de trayectoria}. \end{enumerate}%
	\renewcommand{\labelenumi}{\theenumi}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comandos para agregar un paso a una trayectoria, el paso puede ser 
% dado por el actor \UCactor o por el sistema \UCsist, por defecto el 
% paso es dado por el sistema.
% usar \UCpaso[\UCactor]
\newcommand{\UCpaso}[1][\UCsist]{\item #1 }



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Referencia para un Mensaje
%use \UCMessage{Id}{nombre}
\newcommand{\MSGref}[2]{%
	\hypersetup{linkcolor=SecccionColor}%
	\hyperlink{#1}{#1 #2}%
}

\newenvironment{Message}[2]%linea original
{%
	\hypertarget{#1}{}%Linea original
	\noindent{\large{\bf \color{SecccionColor}{Mensaje:}} #1 #2}%line Original
	\begin{description}\addtolength{\itemsep}{-0.5\baselineskip}%
}
{%
	\end{description}
}

\newcommand{\MSGitem}[1][]{\item[\hspace{.5cm}#1]}

\newcommand{\Trayref}[1]{
    \hypersetup{linkcolor=SecccionColor}%
\hyperlink{#1}{$[$Trayectoria #1$]$}%
}
\newcommand{\RFref}[1]{%
\hypersetup{linkcolor=SecccionColor}%
\hyperlink{#1}{#1}%
\hypersetup{linkcolor=SecccionColor}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comandos para la descripción de Use Cases
% use \UCInterface{Id}{Nombre}
\newcommand{\IUref}[2]{%
\includegraphics[height=10pt]{images_Gen/uc/iu}~%
\hypersetup{linkcolor=SecccionColor}%
\hyperlink{#1}{#1 #2}%
\hypersetup{linkcolor=SecccionColor}%
}

% use \IUfig[width]{imagefile}{IU1}{Nombre de la pantalla}
\newcommand{\IUfig}[4][0.7]{%
	\begin{figure}[ht!]%
		\begin{center}%
			\hypertarget{#3}{\includegraphics[width=#1\textwidth]{#2}}%
			\caption{#3 #4}%
			\label{#3}%
		\end{center}%
	\end{figure}%
}

% use \IUfig[width]{imagefile}{IU1}{Nombre de la pantalla}
\newcommand{\IUfigVT}[4][0.7]{%
	\begin{figure}[ht!]%
		\begin{center}%
			\hypertarget{#3}{\includegraphics[angle=90, width=#1\textwidth]{#2}}%
			\caption{#3 #4}%
			\label{#3}%
		\end{center}%
	\end{figure}%
}

\newcommand{\SMfig}[4][0.7]{%
	\begin{figure}[ht!]%
		\begin{center}%
			\hypertarget{#3}{\includegraphics[width=#1\textwidth]{#2}}%
			\caption{#3 #4}%
			\label{#3}%
		\end{center}%
	\end{figure}%
}



\newcommand{\Emailfig}[4][0.7]{%
	\begin{figure}[ht!]%
		\begin{center}%
			\hypertarget{#3}{\includegraphics[width=#1\textwidth]{images/#2}}%
			\caption{#3 #4}%
			\label{#3}%
		\end{center}%
	\end{figure}%
}


\newcommand{\FRitem}[5]{\par{#1} & {#2} & {#3} & {#4} & {#5} \\ \hline}%& {#4} \\ \hline}

\newenvironment{requerimientos}[1][PrincipalColor]
{%
	\arrayrulecolor{#1}%
	\par\noindent\begin{longtable}{| p{.06\textwidth} | p{.2\textwidth} | p{.6\textwidth} |p{.03\textwidth} | p{.03\textwidth} |}
		\arrayrulecolor{#1}%
		\hline%
		\rowcolor{#1}%
		\multicolumn{5}{|c|}{\bf\color{white}Requerimientos funcionales}\\%
		\arrayrulecolor{white}%
		\rowcolor{#1}%
		\FRitem{\color{white}Id}{\color{white} Nombre}{\color{white} Descripción}{\color{white} Prio.}{\color{white} Ref.}\endhead%
		\arrayrulecolor{#1}%
}{%
	\end{longtable} %
	\arrayrulecolor{black} %
}



\newenvironment{requerimientosnf}[1][PrincipalColor]
{%
	\arrayrulecolor{#1}%
	\par\noindent\begin{longtable}{| p{.06\textwidth} | p{.2\textwidth} | p{.6\textwidth} |p{.03\textwidth} | p{.03\textwidth} |}
		\arrayrulecolor{#1}%
		\hline%
		\rowcolor{#1}%
		\multicolumn{5}{|c|}{\bf\color{white}Requerimientos no funcionales}\\%
		\arrayrulecolor{white}%
		\rowcolor{#1}%
		\FRitem{\color{white}Id}{\color{white} Nombre}{\color{white} Descripción}{\color{white} Prio.}{\color{white} Ref.}\endhead%
		\arrayrulecolor{#1}%
}{%
	\end{longtable} %
	\arrayrulecolor{black} %
}



% restricciones de cosntrucción probar 

\newcommand{\RCitem}[3]{\par{#1} & {#2} & {#3} \\ \hline}%& {#4} \\ \hline}

\newenvironment{restcon}[1][PrincipalColor]
{%
	\arrayrulecolor{#1}%
	\par\noindent\begin{longtable}{| p{.06\textwidth} | p{.2\textwidth} | p{.6\textwidth} |}
		\arrayrulecolor{#1}%
		\hline%
		\rowcolor{#1}%
		\multicolumn{3}{|c|}{\bf\color{white}Restricciones de Construcción}\\%
		\arrayrulecolor{white}%
		\rowcolor{#1}%
		\RCitem{\color{white}Id}{\color{white} Nombre}{\color{white} Descripción}\endhead%
		\arrayrulecolor{#1}%
}{%
	\end{longtable} %
	\arrayrulecolor{black} %
}